(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,n,t){e.exports=t(25)},15:function(e,n,t){},16:function(e,n,t){},25:function(e,n,t){"use strict";t.r(n);var a=t(1),o=t.n(a),r=t(9),u=t.n(r),c=(t(15),t(2)),i=(t(16),t(3));t(19),t(23);i.initializeApp({apiKey:"AIzaSyAtaxChdsXsafnwlDz8L5qbyKopnKMCrno",authDomain:"memlang.firebaseapp.com",databaseURL:"https://memlang.firebaseio.com",projectId:"memlang",storageBucket:"",messagingSenderId:"1041692358779",appId:"1:1041692358779:web:1e84cc9b3cf01527"});var l=new i.auth.GoogleAuthProvider,s=i.firestore(),d=function(e){var n=e.user,t=n.name,a=n.photo;return o.a.createElement("div",{style:{lineHeight:"30px"}},o.a.createElement("img",{src:a,alt:t,style:{width:"30px",height:"30px",borderRadius:"15px",verticalAlign:"middle"}})," ",o.a.createElement("span",{style:{verticalAlign:"middle"}},t)," ",o.a.createElement("button",{style:{verticalAlign:"middle"},onClick:function(){return i.auth().signOut().then(function(){console.log("Successful sign out")}).catch(function(e){console.log(e)})}},"Logout"))},h=function(e){var n=e.user,t=e.dispatch;return o.a.createElement("div",null,n.signIn?o.a.createElement(d,{user:n,dispatch:t}):o.a.createElement("button",{onClick:function(){return i.auth().signInWithPopup(l).then(function(e){if(e.credential){var n=e.credential.accessToken,t=e.user;if(console.log("signInWithPopup",n,t),t)return t.displayName}}).catch(function(e){var n=e.code,t=e.message,a=e.email,o=e.credential;console.log(n,t,a,o)})}},"Login"))},m=t(5);function g(e,n){switch(n.type){case"login":return function(e,n){var t=n.user,a=t.name,o=t.photo,r=t.token,u=t.uid;return Object(m.a)({},e,{user:{signIn:!0,name:a,photo:o,token:r,uid:u}})}(e,n);case"logout":return Object(m.a)({},e,{user:{signIn:!1,name:"",photo:"",token:"",uid:""}});default:return e}}var f="https://us-central1-memlang.cloudfunctions.net";var p=function(e){var n=e.authToken,t=e.userId,r=Object(a.useState)(""),u=Object(c.a)(r,2),i=u[0],l=u[1],d=Object(a.useState)(""),h=Object(c.a)(d,2),m=h[0],g=h[1],p=function(){i.length>2&&i.length<100&&function(e,n){return fetch("".concat(f,"/translate/").concat(encodeURIComponent(e)),{headers:{Authorization:"Bearer ".concat(n)}}).then(function(e){return e.json()})}(i,n).then(function(e){return g(e.join(", "))})},v=function(e){13===e.which&&p()};return o.a.createElement("div",null,o.a.createElement("h1",null,"Translator"),o.a.createElement("div",null,"Source text:"," ",o.a.createElement("input",{type:"text",value:i,onChange:function(e){return l(e.target.value)},onKeyPress:v})," ",o.a.createElement("button",{onClick:p},"Go")),m.length>0&&o.a.createElement("div",null,o.a.createElement("h3",null,"Translation:"),o.a.createElement("input",{type:"text",value:m,onChange:function(e){return l(e.target.value)},onKeyPress:v}),o.a.createElement("button",{onClick:function(){var e,n,a;i.length>2&&i.length<100&&m.length>2&&i.length<100&&(e=i,n=m,a=t,s.collection("dictionary").add({en:e,ru:n,user:a}))}},"Save")))},v=function(e){var n=e.userId,t=Object(a.useState)([]),r=Object(c.a)(t,2),u=r[0],i=r[1];return Object(a.useEffect)(function(){var e;(e=n,s.collection("dictionary").where("user","==",e).get().then(function(e){var n=[];return e.forEach(function(e){return n.push(e.data())}),n})).then(function(e){return i(e)})},[n]),o.a.createElement("div",null,o.a.createElement("ul",null,u.map(function(e,n){var t=e.en,a=e.ru;return o.a.createElement("li",{key:n},t," - ",a)})))},E={user:{signIn:!1,name:"",photo:"",token:"",uid:""}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(o.a.createElement(function(){var e=Object(a.useReducer)(g,E),n=Object(c.a)(e,2),t=n[0],r=n[1];return Object(a.useEffect)(function(){!function(e){i.auth().onAuthStateChanged(function(n){if(n){var t=n.displayName,a=n.photoURL,o=n.uid;n.getIdToken().then(function(n){e({type:"login",user:{name:t||"anon",photo:a||"",token:n,uid:o}})})}else e({type:"logout"})})}(r)},[]),o.a.createElement("div",{className:"App"},o.a.createElement(h,{dispatch:r,user:t.user}),t.user.signIn&&o.a.createElement(p,{authToken:t.user.token,userId:t.user.uid}),t.user.signIn&&o.a.createElement(v,{userId:t.user.uid}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.ef1423cb.chunk.js.map